{"ast":null,"code":"export default {\n  name: \"App\",\n\n  data() {\n    return {\n      list: [{\n        img: require(\"..//assets/images/honor.jpg\"),\n        name: \"华为 P20 4G手机 双卡双待\",\n        num: 1,\n        unitPrice: 2399,\n        isSelect: false\n      }, {\n        img: require(\"../assets/images/oppo.jpg\"),\n        name: \"OPPO R15 智能手机 全网通\",\n        num: 2,\n        unitPrice: 2699,\n        isSelect: false\n      }, {\n        img: require(\"..//assets/images/vivo.jpg\"),\n        name: \"vivo X27 8GB+256GB大内存\",\n        num: 1,\n        unitPrice: 3588,\n        isSelect: false\n      }],\n      //记录选中的项,\n      checkData: [],\n      //是否为全选\n      isSelectAll: false\n    };\n  },\n\n  computed: {\n    //计算选了几件\n    selectAmount() {\n      return this.checkData.length;\n    },\n\n    //计算总金额\n    totalMoney() {\n      let money = 0;\n      this.checkData.forEach(item => {\n        let data = this.list[item];\n\n        if (data.isSelect) {\n          money += this.list[item].num * this.list[item].unitPrice;\n        }\n      });\n      return money;\n    }\n\n  },\n  watch: {\n    checkData: {\n      handler() {\n        if (this.checkData.length === this.list.length) {\n          this.isSelectAll = true;\n        } else {\n          this.isSelectAll = false;\n        }\n      },\n\n      deep: true\n    }\n  },\n  methods: {\n    //移除数量\n    removeItem(removeIndex) {\n      this.list.splice(removeIndex, 1);\n      console.log(this.checkData);\n      this.checkData = this.checkData.map((item, index) => {\n        return index !== removeIndex;\n      });\n    },\n\n    //增加数量\n    decrease(changIndex) {\n      console.log(\"减少数量\"); //变更数量\n\n      this.list.find((item, index) => {\n        if (changIndex === index) {\n          item.num--;\n        }\n      });\n    },\n\n    //减少数量\n    increase(changIndex) {\n      console.log(\"增加数量\"); //变更数量\n\n      this.list.find((item, index) => {\n        if (changIndex === index) {\n          item.num++;\n        }\n      });\n    },\n\n    //是否全选\n    checkAll() {\n      //获取当前的选择状态\n      let checkStatus = !this.isSelectAll;\n\n      if (checkStatus) {\n        //清空\n        this.checkData = []; //全选\n\n        this.list.forEach((item, index) => {\n          item.isSelect = true;\n          this.checkData.push(index);\n        });\n      } else {\n        //全不选\n        this.checkData = [];\n        this.list.forEach((item, index) => {\n          item.isSelect = false;\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAwEA;EACAA,WADA;;EAEAC;IACA;MACAC,OACA;QACAC,2CADA;QAEAH,wBAFA;QAGAI,MAHA;QAIAC,eAJA;QAKAC;MALA,CADA,EAQA;QACAH,yCADA;QAEAH,yBAFA;QAGAI,MAHA;QAIAC,eAJA;QAKAC;MALA,CARA,EAeA;QACAH,0CADA;QAEAH,6BAFA;QAGAI,MAHA;QAIAC,eAJA;QAKAC;MALA,CAfA,CADA;MAwBA;MACAC,aAzBA;MA0BA;MACAC;IA3BA;EA6BA,CAhCA;;EAiCAC;IACA;IACAC;MACA;IACA,CAJA;;IAKA;IACAC;MACA;MACA;QACA;;QACA;UACAC;QACA;MACA,CALA;MAMA;IACA;;EAfA,CAjCA;EAkDAC;IACAN;MACAO;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CAPA;;MAQAC;IARA;EADA,CAlDA;EA8DAC;IACA;IACAC;MACA;MACAC;MACA;QACA;MACA,CAFA;IAGA,CARA;;IASA;IACAC;MACAD,oBADA,CAEA;;MACA;QACA;UACAE;QACA;MACA,CAJA;IAKA,CAlBA;;IAmBA;IACAC;MACAH,oBADA,CAEA;;MACA;QACA;UACAE;QACA;MACA,CAJA;IAKA,CA5BA;;IA6BA;IACAE;MACA;MACA;;MACA;QACA;QACA,oBAFA,CAGA;;QACA;UACAF;UACA;QACA,CAHA;MAIA,CARA,MAQA;QACA;QACA;QACA;UACAA;QACA,CAFA;MAGA;IACA;;EAhDA;AA9DA","names":["name","data","list","img","num","unitPrice","isSelect","checkData","isSelectAll","computed","selectAmount","totalMoney","money","watch","handler","deep","methods","removeItem","console","decrease","item","increase","checkAll"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <table cellpading=\"0\" cellspacing=\"0\">\n      <thead class=\"table-head\">\n        <tr>\n          <th>选择</th>\n          <th>商品信息</th>\n          <th>单价</th>\n          <th>数量</th>\n          <th>金额</th>\n          <th>操作</th>\n        </tr>\n      </thead>\n\n      <tbody class=\"table-body\">\n        <tr v-for=\"(item, index) in list\" :key=\"index\">\n          <td>\n            <input\n              type=\"checkbox\"\n              :value=\"index\"\n              v-model=\"checkData\"\n              @click=\"item.isSelect = !item.isSelect\"\n            />\n          </td>\n          <td class=\"showinfo\">\n            <img :src=\"item.img\" />\n            <span>{{ item.name }}</span>\n          </td>\n          <td>{{ item.unitPrice }}元</td>\n          <td>\n            <!-- 减少 -->\n            <button\n              :class=\"{ active: item.num != 1 }\"\n              :disabled=\"item.num == 1\"\n              @click=\"decrease(index)\"\n            >\n              -\n            </button>\n            <span style=\"margin: 0 5px\">{{ item.num }}</span>\n            <!-- 增加 -->\n            <button class=\"active\" @click=\"increase(index)\">+</button>\n          </td>\n          <!-- 总价 -->\n          <td>{{ item.num * item.unitPrice }}元</td>\n          <td @click=\"removeItem(index)\">删除</td>\n        </tr>\n      </tbody>\n      <!-- 底部信息栏 -->\n      <tfoot>\n        <tr>\n          <td>\n            <label\n              ><input\n                type=\"checkbox\"\n                v-model=\"isSelectAll\"\n                @click=\"checkAll\"\n              />全选</label\n            >\n          </td>\n          <td colspan=\"4\">\n            已选商品<span style=\"color: #f6b74a\">{{ selectAmount }}</span\n            >件,合计:<span style=\"color: #f6b74a\">¥{{ totalMoney }}</span\n            >元\n          </td>\n          <td><button class=\"settle\">去结算</button></td>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      list: [\n        {\n          img: require(\"..//assets/images/honor.jpg\"),\n          name: \"华为 P20 4G手机 双卡双待\",\n          num: 1,\n          unitPrice: 2399,\n          isSelect: false,\n        },\n        {\n          img: require(\"../assets/images/oppo.jpg\"),\n          name: \"OPPO R15 智能手机 全网通\",\n          num: 2,\n          unitPrice: 2699,\n          isSelect: false,\n        },\n        {\n          img: require(\"..//assets/images/vivo.jpg\"),\n          name: \"vivo X27 8GB+256GB大内存\",\n          num: 1,\n          unitPrice: 3588,\n          isSelect: false,\n        },\n      ],\n      //记录选中的项,\n      checkData: [],\n      //是否为全选\n      isSelectAll: false,\n    };\n  },\n  computed: {\n    //计算选了几件\n    selectAmount() {\n      return this.checkData.length;\n    },\n    //计算总金额\n    totalMoney() {\n      let money = 0;\n      this.checkData.forEach((item) => {\n        let data = this.list[item];\n        if (data.isSelect) {\n          money += this.list[item].num * this.list[item].unitPrice;\n        }\n      });\n      return money;\n    },\n  },\n  watch: {\n    checkData: {\n      handler() {\n        if (this.checkData.length === this.list.length) {\n          this.isSelectAll = true;\n        } else {\n          this.isSelectAll = false;\n        }\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    //移除数量\n    removeItem(removeIndex) {\n      this.list.splice(removeIndex, 1);\n      console.log(this.checkData);\n      this.checkData = this.checkData.map((item, index) => {\n        return index !== removeIndex;\n      });\n    },\n    //增加数量\n    decrease(changIndex) {\n      console.log(\"减少数量\");\n      //变更数量\n      this.list.find((item, index) => {\n        if (changIndex === index) {\n          item.num--;\n        }\n      });\n    },\n    //减少数量\n    increase(changIndex) {\n      console.log(\"增加数量\");\n      //变更数量\n      this.list.find((item, index) => {\n        if (changIndex === index) {\n          item.num++;\n        }\n      });\n    },\n    //是否全选\n    checkAll() {\n      //获取当前的选择状态\n      let checkStatus = !this.isSelectAll;\n      if (checkStatus) {\n        //清空\n        this.checkData = [];\n        //全选\n        this.list.forEach((item, index) => {\n          item.isSelect = true;\n          this.checkData.push(index);\n        });\n      } else {\n        //全不选\n        this.checkData = [];\n        this.list.forEach((item, index) => {\n          item.isSelect = false;\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\ntable {\n  border: 1px solid red;\n  width: 800px;\n  text-align: center;\n}\n.settle {\n  background-color: red;\n  padding: 10px;\n}\nbutton {\n  border: none;\n  color: white;\n  background-color: #cccccc;\n}\n/* 可以活动时候的按钮样式 */\nbutton.active {\n  background-color: red;\n  color: white;\n}\n.showinfo {\n  position: relative;\n  width: 400px;\n}\n.showinfo span {\n  position: absolute;\n  top: 50%;\n  left: 140px;\n}\ntbody img {\n  float: left;\n  margin-left: 20px;\n  width: 100px;\n  /* height: 100px; */\n}\ntfoot {\n  background-color: #eeeeee;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}